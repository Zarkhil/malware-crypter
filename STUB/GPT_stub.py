import subprocess
import os

def stub():
    decryptor_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), "GPT_decryptor.py")
    p = subprocess.Popen(["python", decryptor_path], shell=True, cwd=os.path.dirname(os.path.abspath(__file__)))
    out, err = p.communicate()
    print(err)
    print(out)

    decrypted_file_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), "(decrypted)calculator.exe")
    if os.path.exists(decrypted_file_path):
        print("File exists")
        subprocess.run(["start", "", decrypted_file_path], shell=True) #opens new cmd and runs file
        # subprocess.run(decrypted_file_path, shell=True) #doesnt open shell, runs in background or already open shell
    else:
        print("File does not exist")

stub()